<?php
/**
 * @var Registration\Form\UserForm $form
 */
?>
<script>
$(document).ready(function() {
  // University/High school selection
  studySelect = $('select[name="user[study]"]');
  studySelect.change(function() {
    highSchool = $("div.form-group").has("select[name='user[highSchool]'");
    university = $("div.form-group").has("select[name='user[university]'");
    val = $(this).val();
    if (val == 'UN') {
        highSchool.hide();
        university.show();
    } else if (val == 'HS') {
        highSchool.show();
        university.hide();
    } else {
        highSchool.hide();
        university.hide();
    }
  });
  studySelect.change();

  // Input validation
  requiredInput = $("div.required").find("input");
  requiredInput.blur(function() {
    value = $(this).val();
    if (value.trim() === "") {
      //$(this).addClass('is-invalid');
      //$(this).removeClass('is-valid');
    } else {
      //$(this).removeClass('is-invalid');
      //$(this).addClass('is-valid');
    }
  });
  requiredInput.blur();
});
</script>

<ul class="nav mb-3">
    <li class="mr-3">
        <a class="btn btn-primary active"><?=$this->translate('Personal information')?></a>
    </li>
    <li class="mr-3">
        <a class="btn btn-outline-primary" href="<?=$this->url('password')?>"><?=$this->translate('Password')?></a>
    </li>
</ul>

<?
$form->prepare();
?>
<?= $this->form()->openTag($form); ?>

<div class="card">
    <h2 class="card-header">
        <?= $this->translate('Personal information') ?>
    </h2>
    <div class="card-body">
        <div class="row">
            <div class="col-md-2">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('degree')])?>
            </div>
            <div class="col-md-5">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('firstName')])?>
            </div>
            <div class="col-md-5">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('lastName')])?>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <?//=$this->render('element.phtml', ['element' => $form->get('user')->get('isCompany')])?>
                <div class="form-group form-check">
                    <label class="form-check-label" data-toggle="collapse" data-target="#collapseIsCompany">
                        <input type="checkbox" class="form-check-input" id="user[isCompany]">
                        <?=$this->translate('label_isCompany');?>
                    </label>
                </div>
            </div>
        </div>
        <div id="collapseIsCompany" class="panel-collapse collapse in">
            <div class="row">
                <div class="col-md-6">
                    <?=$this->render('element.phtml', ['element' => $form->get('user')->get('cin')])?>
                </div>
                <div class="col-md-6">
                    <?=$this->render('element.phtml', ['element' => $form->get('user')->get('tin')])?>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('phone')])?>
            </div>
            <div class="col-md-6">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('email')])?>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('birth')])?>
            </div>
            <div class="col-md-12">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('member')])?>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    <label class="form-label"><?= $this->translate('label_discount') ?>:</label>
                    <div class="alert alert-primary">
                        <?= $this->translate('option_discount_1'); ?>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('study')])?>
            </div>
            <div class="col-md-12">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('highSchool')])?>
            </div>
            <div class="col-md-12">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('university')])?>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <h2 class="card-header"><?=$this->translate('Adresa')?></h2>
    <div class="card-body">
        <h4><?=$this->translate('Permanent address')?></h4>
        <div class="row">
            <div class="col-md-6">
                <?=$this->render('element.phtml', ['element' => $form->get('permanentAddress')->get('street')])?>
            </div>
            <div class="col-md-4">
                <?=$this->render('element.phtml', ['element' => $form->get('permanentAddress')->get('city')])?>
            </div>
            <div class="col-md-2">
                <?=$this->render('element.phtml', ['element' => $form->get('permanentAddress')->get('postcode')])?>
            </div>
        </div>
        <div class="form-group form-check">
            <label class="form-check-label" data-toggle="collapse" data-target="#collapseisContactAddress">
                <input type="checkbox" class="form-check-input" id="user[isContactAddress]">
                <?=$this->translate('Kontaktní adresa se liší od trvalé');?>
            </label>
        </div>
        <div id="collapseisContactAddress" class="panel-collapse collapse in">
            <h4><?=$this->translate('Contact address')?></h4>
            <div class="row">
                <div class="col-md-6">
                    <?=$this->render('element.phtml', ['element' => $form->get('contactAddress')->get('street')])?>
                </div>
                <div class="col-md-4">
                    <?=$this->render('element.phtml', ['element' => $form->get('contactAddress')->get('city')])?>
                </div>
                <div class="col-md-2">
                    <?=$this->render('element.phtml', ['element' => $form->get('contactAddress')->get('postcode')])?>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <h2 class="card-header"><?=$this->translate('Doklad totožnosti')?></h2>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('identificationType')])?>
            </div>
            <div class="col-md-6">
                <?=$this->render('element.phtml', ['element' => $form->get('user')->get('identification')])?>
            </div>
        </div>
    </div>
</div>

<div class="card-body">
    <div class="form-group">
        <label class="form-check-label">
            <input type="checkbox" class="form-check-input" id="isSendNews">
            <?=$this->translate('Zasílání novinek z knihovny');?>
        </label>
    </div>
    <div class="form-group">
        <label class="form-check-label">
            <input type="checkbox" class="form-check-input" id="isGdpr">
            <?=$this->translate('Zpracování osobních údajů');?>
        </label>
    </div>
</div>

<div class="alert alert-primary text-center">
    Cena registrace je <strong>XXX,- Kč</strong>
</div>
<div class="text-center">
    <?//= $this->formSubmit($form->get('submit')); ?>
    <input type="submit" name="submit" class="btn btn-primary" value="Další krok &raquo;">
</div>
<?=$this->form()->closeTag();?>
